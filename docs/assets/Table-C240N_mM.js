import{d as D,c as M,o as S,g as v,i as z,v as g,j as te,aj as ne,u as J,ag as le,r as p,f as U,w as m,a as o,D as E,e as s,l as j,O,t as I,ak as oe,_ as Q,af as ie,al as se,M as ce,p as L,am as re,K as ae,k as de,ab as ue}from"./index-XoUNSFcm.js";const fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},pe=v("path",{d:"M762 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm-508 0v72.4c0 9.5 4.2 18.4 11.4 24.5L564.6 512L265.4 763.1c-7.2 6.1-11.4 15-11.4 24.5V860c0 6.8 7.9 10.5 13.1 6.1L689 512L267.1 157.9A7.95 7.95 0 0 0 254 164z",fill:"currentColor"},null,-1),he=[pe],me=D({name:"VerticalLeftOutlined",render:function(e,n){return S(),M("svg",fe,he)}}),_e={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},xe=v("path",{d:"M326 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm444 72.4V164c0-6.8-7.9-10.5-13.1-6.1L335 512l421.9 354.1c5.2 4.4 13.1.7 13.1-6.1v-72.4c0-9.4-4.2-18.4-11.4-24.5L459.4 512l299.2-251.1c7.2-6.1 11.4-15.1 11.4-24.5z",fill:"currentColor"},null,-1),ve=[xe],ye=D({name:"VerticalRightOutlined",render:function(e,n){return S(),M("svg",_e,ve)}}),W=Symbol(),ke=[!0,"left"],ge=["right"];function X(l,e,n=0){if(!(l!=null&&l.length))return[];const{index:y,selection:r,left:k,middle:d,right:_}=l.reduce((c,h,x)=>{if(n!==0&&["selection","index","expand"].includes(h.type||"default"))return c;const t={id:"crypto"in window?crypto.randomUUID():e!=null?`${e}-${x}`:`${x}`,...h,checked:!0,children:X(h.children,x,n+1),deep:n,fixed:["index","selection"].includes(h.type)?"left":h.fixed};return t.type==="index"?c.index.push(t):t.type==="selection"?c.selection.push(t):!t.fixed||n!==0?c.middle.push(t):ke.includes(t.fixed)?c.left.push(t):ge.includes(t.fixed)&&c.right.push(t),c},{index:[],selection:[],left:[],middle:[],right:[]});return[...r,...y,...k,...d,..._]}function K(l){return l.every(e=>{var n;return e.type==="index"||e.type==="selection"?!0:(n=e.children)!=null&&n.length?e.checked&&K(e.children):e.checked})}function be(l){return l.some(e=>{var n;return e.type==="index"||e.type==="selection"?!1:(n=e.children)!=null&&n.length?e.checked||K(e.children):e.checked})}function F(l,e){l.forEach(n=>{n.type==="index"||n.type==="selection"||(n.checked=e,n.children&&F(n.children,e))})}function we(l){const e=z([]),n=z([]),y=g(()=>e.value.some(t=>t.type==="index")),r=g(()=>e.value.some(t=>t.type==="selection")),k=g({get:()=>{var t;return((t=e.value.find(u=>u.type==="index"))==null?void 0:t.checked)||!1},set:t=>{const u=e.value.findIndex(f=>f.type==="index");e.value[u].checked=t}}),d=g({get:()=>{var t;return((t=e.value.find(u=>u.type==="selection"))==null?void 0:t.checked)||!1},set:t=>{const u=e.value.findIndex(f=>f.type==="selection");e.value[u].checked=t}}),_=g({get:()=>e.value.length<=0?!1:K(e.value),set:t=>{c.value?F(e.value,!0):F(e.value,t)}}),c=g(()=>_.value?!1:be(e.value)),h=g(()=>e.value.filter(t=>t.checked).length<=0);te(()=>l,x,{immediate:!0,deep:!0});function x(){e.value=X(ne(l)),n.value=e.value.filter(t=>!["index","selection"].includes(t.type||""))}return{columns:e,setColumns:n,isShowIndex:y,isShowSelection:r,isEmpty:h,checkAll:_,indeterminate:c,checkedIndex:k,checkedSelection:d,onReset:x}}const Ce={class:"table-set"},Ve={class:"table-set__header"},Se={class:"table-set__list"},$e={class:"table-set__list-item"},Ie={class:"flex items-center gap-10px"},Le={key:0,class:"flex items-center"},Y=D({name:"TableSet",__name:"TableSet",setup(l){const{t:e,$t:n}=J(),{columns:y,isShowIndex:r,isShowSelection:k,checkedIndex:d,checkedSelection:_,checkAll:c,indeterminate:h,onReset:x}=le(W),t={label:"label",children:"children"};function u(f,a){a==="left"?f.fixed=f.fixed==="left"||f.fixed===!0?void 0:a:a==="right"&&(f.fixed=f.fixed==="right"?void 0:a)}return(f,a)=>{const R=p("icon"),b=p("el-checkbox"),N=p("el-link"),B=p("el-popconfirm"),w=p("el-button"),$=p("el-button-group"),T=p("el-tree"),C=p("el-scrollbar"),A=p("el-popover");return S(),U(A,{width:"auto",placement:"bottom-end",persistent:!1,trigger:"click","hide-after":0,"popper-style":"padding: 0;"},{reference:m(()=>[o(R,{cursor:""},{default:m(()=>[o(s(oe))]),_:1})]),default:m(()=>[v("div",Ce,[v("div",Ve,[o(b,{modelValue:s(c),"onUpdate:modelValue":a[0]||(a[0]=i=>j(c)?c.value=i:null),indeterminate:s(h)},{default:m(()=>[O(I(s(e)("all")),1)]),_:1},8,["modelValue","indeterminate"]),s(r)?(S(),U(b,{key:0,modelValue:s(d),"onUpdate:modelValue":a[1]||(a[1]=i=>j(d)?d.value=i:null)},{default:m(()=>[O(I(s(e)("index")),1)]),_:1},8,["modelValue"])):E("",!0),s(k)?(S(),U(b,{key:1,modelValue:s(_),"onUpdate:modelValue":a[2]||(a[2]=i=>j(_)?_.value=i:null)},{default:m(()=>[O(I(s(e)("selection")),1)]),_:1},8,["modelValue"])):E("",!0),o(B,{width:"200",title:s(n)("button.sure",[s(n)("button.reset")]),"hide-after":0,onConfirm:s(x)},{reference:m(()=>[o(N,{class:"ml-20px",type:"primary"},{default:m(()=>[O(I(s(n)("button.reset")),1)]),_:1})]),_:1},8,["title","onConfirm"])]),v("div",Se,[o(C,{"max-height":"300"},{default:m(()=>[o(T,{class:"tree",data:s(y),props:t,"expand-on-click-node":!1,"node-key":"id"},{default:m(({data:i})=>[v("div",$e,[v("div",Ie,[o(b,{modelValue:i.checked,"onUpdate:modelValue":V=>i.checked=V},null,8,["modelValue","onUpdate:modelValue"]),v("span",null,I(i.label),1)]),i.deep===0?(S(),M("div",Le,[o($,{size:"small"},{default:m(()=>[o(w,{type:[!0,"left"].includes(i.fixed)?"primary":void 0,icon:s(ye),onClick:V=>u(i,"left")},null,8,["type","icon","onClick"]),o(w,{type:i.fixed==="right"?"primary":void 0,icon:s(me),onClick:V=>u(i,"right")},null,8,["type","icon","onClick"])]),_:2},1024)])):E("",!0)])]),_:1},8,["data"])]),_:1})])])]),_:1})}}});function q(l){const e=l;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{zh:{all:{t:0,b:{t:2,i:[{t:3}],s:"全部"}},index:{t:0,b:{t:2,i:[{t:3}],s:"序号列"}},selection:{t:0,b:{t:2,i:[{t:3}],s:"多选列"}}},en:{all:{t:0,b:{t:2,i:[{t:3}],s:"all"}},index:{t:0,b:{t:2,i:[{t:3}],s:"index"}},selection:{t:0,b:{t:2,i:[{t:3}],s:"selection"}}}}})}typeof q=="function"&&q(Y);const Re=Q(Y,[["__scopeId","data-v-4a8c4ac4"]]),Z=D({name:"BaseTable",inheritAttrs:!1,props:{columns:{type:Array,default:()=>[]},loading:Boolean,tools:{type:Boolean,default:!0}},emits:["refresh"],slots:Object,setup(l,{attrs:e,slots:n,emit:y}){const r=ie("table",z("base")),{t:k}=J(),d=z(""),{columns:_,setColumns:c,isShowIndex:h,isShowSelection:x,checkedIndex:t,checkedSelection:u,checkAll:f,indeterminate:a,isEmpty:R,onReset:b}=we(l.columns),N=se(()=>{d.value||(d.value="rotation",setTimeout(()=>{d.value=""},1e3)),y("refresh")},1e3,{trailing:!1});ue(W,{columns:c,isShowIndex:h,isShowSelection:x,checkedIndex:t,checkedSelection:u,checkAll:f,indeterminate:a,onReset:b});function B(w){return w.map($=>{const{checked:T,children:C,slotName:A,render:i,renderHeader:V,renderFilterIcon:P,...ee}=$;return T?o(p("el-table-column"),ee,{default:H=>{if(C!=null&&C.length)return B(C);if(i)return i(H);if(A)return L(n,A,{...H})},header:V||void 0,"filter-icon":P||void 0}):null})}return()=>{const{loading:w,tools:$}=l;return o("div",{class:r.b()},[$?o("div",{class:r.e("tool")},[o("div",{class:r.e("action")},[L(n,"action")]),o("div",{class:r.e("extra")},[L(n,"extra"),o(p("icon"),{class:d.value,cursor:!0,icon:"EleRefreshRight",onClick:N},null),o(Re,null,null)])]):null,ce(o(p("el-table"),de({class:r.e("main")},e),{default:()=>B(_.value),append:n.append?()=>L(n,"append"):void 0,empty:n.empty?()=>L(n,"empty"):void 0}),[[re,!R.value],[ae("loading"),w]]),R.value?o("div",{class:r.e("empty")},[o("span",{class:r.em("empty","text")},[k("empty-column")])]):null])}}});function G(l){const e=l;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{zh:{confirmSet:{t:0,b:{t:2,i:[{t:3}],s:"确认要重置吗？"}},"empty-column":{t:0,b:{t:2,i:[{t:3}],s:"暂无列数据"}}},en:{confirmSet:{t:0,b:{t:2,i:[{t:3}],s:"Are you sure you want to reset?"}},"empty-column":{t:0,b:{t:2,i:[{t:3}],s:"No Column Data"}}}}})}typeof G=="function"&&G(Z);const Ae=Q(Z,[["__scopeId","data-v-d7aff1fc"]]);export{Ae as default};
